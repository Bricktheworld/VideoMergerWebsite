(this["webpackJsonpvideo-merger"]=this["webpackJsonpvideo-merger"]||[]).push([[0],{18:function(e,t,n){e.exports=n(31)},23:function(e,t,n){},24:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(4),c=n.n(o),i=(n(23),n(2)),l=(n(24),n(17)),s=function(e){var t=Object(a.useCallback)(e.onDrop,[]),n=Object(l.a)({onDrop:t}),o=n.getRootProps,c=n.getInputProps,i=n.isDragActive;return r.a.createElement("div",Object.assign({},o(),{style:{display:"flex",backgroundColor:"grey",width:"70%",justifyContent:"center",paddingTop:"10vh",paddingBottom:"10vh",marginBottom:"5vh"}}),r.a.createElement("input",c()),i?r.a.createElement("p",null,e.dropText):r.a.createElement("p",null,e.dragText))},u=function(e){var t=e.index,n=Math.floor(t/3600);t-=60*n*60;var a=Math.floor(t/60);t-=60*a;var o="".concat(n<10?"0"+n:n,":").concat(a<10?"0"+a:a,":").concat(t<10?"0"+t:t);return console.log(o),r.a.createElement("div",{key:e.index,style:{width:"4vw",height:"25%",backgroundColor:"transparent",borderLeftColor:"white",borderLeftWidth:"2px",borderLeftStyle:"solid",display:"flex",flexDirection:"column"}},0!=e.index?r.a.createElement("p",{style:{color:"white",height:"100%",zIndex:200,marginTop:"1.5vh",marginLeft:"-4vw",userSelect:"none",fontSize:"0.7em"}},o):r.a.createElement("div",null))},d=n(14),f=n.n(d),m=n(3),h=n(5),v=n(8),p=n(7),g=n(15),w=n.n(g),b=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).state={},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.$el=c.a.findDOMNode(this),this.$waveform=this.$el.querySelector(".wave"),this.wavesurfer=w.a.create({container:this.$waveform,waveColor:"violet",progressColor:"violet",responsive:!0,interact:!1}),this.wavesurfer.load(this.props.src)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"waveform"},r.a.createElement("div",{className:"wave"}))}}]),n}(r.a.Component);b.defaultProps={src:""};var E=function(e){var t=Object(a.useState)(0),n=Object(i.a)(t,2),o=n[0],c=n[1],l=Object(a.useRef)(null),s=Object(a.useState)(1),u=Object(i.a)(s,2);u[0],u[1];return Object(a.useEffect)((function(){document.body.addEventListener("wheel",(function(e){e.ctrlKey&&(e.preventDefault(),console.log(e.deltaY))}),{passive:!1})}),[]),r.a.createElement(f.a,{axis:"x",disabled:e.isTemplate,onStop:function(t,n){e.onChangeOffset(n.x/n.node.clientWidth*o)}},r.a.createElement("div",{style:{width:4*o+"vw",backgroundColor:"#00647a",marginBottom:"2.5vh"}},r.a.createElement("div",{className:"parent-component",style:{width:"100%",height:"100%"}},r.a.createElement(b,{src:window.URL.createObjectURL(e.file)}),r.a.createElement("audio",{src:window.URL.createObjectURL(e.file),ref:l,onLoadedMetadata:function(t){l.current&&(c(l.current.duration),e.onReceivedMetaData(l.current.duration))}}))))},y=function(e){var t=Object(a.useRef)(null),n=Object(a.useState)(0),o=Object(i.a)(n,2),c=o[0],l=o[1],s=Object(a.useState)([]),d=Object(i.a)(s,2),f=d[0],m=d[1],h=function(){return e.offset>0?e.offset:0};return Object(a.useEffect)((function(){var e=new Array(Math.floor(c+h())).fill(null);m(e),console.log("Use effect "+e.length)}),[c,e.offset]),r.a.createElement("div",{style:{height:"40vh",width:"100vw",overflowX:"scroll",overflowY:"hidden"},ref:t,onWheel:function(e){if(e.preventDefault(),t.current&&!e.ctrlKey){var n=t.current.scrollLeft;t.current.scrollTo({top:0,left:n+e.deltaY})}}},r.a.createElement("div",{style:{backgroundColor:"black",height:"3vh",width:4*(c+h())+"vw",display:"flex",flexDirection:"row"}},f.map((function(e,t){return r.a.createElement(u,{key:t,index:t})}))),r.a.createElement(E,{file:e.videoFile,isTemplate:!1,onReceivedMetaData:function(e){e>c&&l(e)},onChangeOffset:function(t){e.onChangeOffset(t)}}),r.a.createElement(E,{file:e.audioFile,isTemplate:!0,onReceivedMetaData:function(e){e>c&&l(e)},onChangeOffset:function(e){}}))},j=function(e){return r.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"row",justifyContent:"center"}},e.isPlaying?r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"100%",onClick:function(t){return e.togglePlay()}},r.a.createElement("g",{"data-name":"Layer 2"},r.a.createElement("g",{"data-name":"pause-circle"},r.a.createElement("rect",{width:"24",height:"24",opacity:"0"}),r.a.createElement("path",{d:"M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"}),r.a.createElement("path",{d:"M15 8a1 1 0 0 0-1 1v6a1 1 0 0 0 2 0V9a1 1 0 0 0-1-1z"}),r.a.createElement("path",{d:"M9 8a1 1 0 0 0-1 1v6a1 1 0 0 0 2 0V9a1 1 0 0 0-1-1z"})))):r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"100%",onClick:function(t){return e.togglePlay()}},r.a.createElement("g",{"data-name":"Layer 2"},r.a.createElement("g",{"data-name":"play-circle"},r.a.createElement("rect",{width:"24",height:"24",opacity:"0"}),r.a.createElement("path",{d:"M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"}),r.a.createElement("path",{d:"M12.34 7.45a1.7 1.7 0 0 0-1.85-.3 1.6 1.6 0 0 0-1 1.48v6.74a1.6 1.6 0 0 0 1 1.48 1.68 1.68 0 0 0 .69.15 1.74 1.74 0 0 0 1.16-.45L16 13.18a1.6 1.6 0 0 0 0-2.36zm-.84 7.15V9.4l2.81 2.6z"})))))},O=n(16),x=function e(t){Object(m.a)(this,e),this.offset=void 0,this.offset=t},k=function(e){new FileReader;var t=Object(a.useState)(0),n=Object(i.a)(t,2),o=(n[0],n[1],Object(a.useState)(0)),c=Object(i.a)(o,2),l=c[0],s=c[1],u=Object(a.useState)(!1),d=Object(i.a)(u,2),f=d[0],m=d[1],h=Object(a.useRef)(null),v=Object(a.useRef)(null);new O.a;Object(a.useEffect)((function(){v.current&&(v.current.onpause=function(e){m(!1),h.current&&h.current.pause()})}),[]),Object(a.useEffect)((function(){var e,t;f?(null===(e=v.current)||void 0===e||e.play(),h.current&&v.current&&(h.current.currentTime=v.current.currentTime-l,h.current.play())):null===(t=v.current)||void 0===t||t.pause()}),[f]);return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",backgroundColor:"#36393E",height:"100vh"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",height:"50vh",width:"100vw"}},r.a.createElement("video",{style:{width:"100%",height:"100%"},ref:h},r.a.createElement("source",{src:window.URL.createObjectURL(e.videoFile),type:"video/mp4"})),r.a.createElement("audio",{ref:v},r.a.createElement("source",{src:window.URL.createObjectURL(e.audioFile)})),r.a.createElement("div",{style:{height:"10vh",fontSize:"2em",color:"black",position:"absolute",bottom:"10vh",margin:"auto",display:"flex",flexDirection:"column",justifyContent:"center"}},r.a.createElement("a",{style:{backgroundColor:"green",padding:"20px",display:"inline-block",userSelect:"none",color:"black"},href:"data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(new x(l))),download:"config.json"},"Export"))),r.a.createElement("div",{style:{height:"5vh",width:"100vw",backgroundColor:"#36393E",zIndex:400}},r.a.createElement(j,{isPlaying:f,togglePlay:function(){return m(!f)}})),r.a.createElement("div",{style:{height:"30vh",width:"100vw",backgroundColor:"#36393E"}},r.a.createElement(y,{onChangeOffset:function(e){m(!1),s(e)},videoFile:e.videoFile,audioFile:e.audioFile,offset:l})))},C=function(){var e=Object(a.useState)("Drag n drop your video here or click to select a file"),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)("Drag n drop the template mp3 here or click to select"),l=Object(i.a)(c,2),u=l[0],d=l[1],f=Object(a.useState)(),m=Object(i.a)(f,2),h=m[0],v=m[1],p=Object(a.useState)(),g=Object(i.a)(p,2),w=g[0],b=g[1];return r.a.createElement("div",{className:"App"},h&&w?r.a.createElement(k,{videoFile:h,audioFile:w}):r.a.createElement("div",{style:{position:"fixed",bottom:0,top:0,left:0,right:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#36393E"}},r.a.createElement(s,{onDrop:function(e){e.forEach((function(e){"video/mp4"==e.type?(o(e.name),v(e)):o("Not the correct type. Please drop an mp4 file")}))},dropText:"Drop",dragText:n}),r.a.createElement(s,{onDrop:function(e){e.forEach((function(e){e.type.startsWith("audio")?(d(e.name),b(e)):d("Not the correct type. Please drop an mp4 file")}))},dropText:"Drop",dragText:u})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.809326c0.chunk.js.map